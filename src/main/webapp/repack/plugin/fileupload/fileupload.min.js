!function(e){var t,o,n="file_upload",a="undefined",r="function",i="number",s=function(e,t){var o=0;this.complete=function(){o+=1,o===t&&e()}};t=function(t){var o,l,d,p=this,c={namespace:n,uploadFormFilter:function(e){return!0},fileInputFilter:function(e){return!0},cssClass:n,dragDropSupport:!0,dropZone:t,url:function(e){return e.attr("action")},method:function(e){return e.attr("method")},fieldName:function(e){return e.attr("name")},formData:function(e){return e.serializeArray()},multipart:!0,multiFileRequest:!1,withCredentials:!1,forceIframeUpload:!1},f={},u={},m=/^http(s)?:\/\//,h=function(){return typeof XMLHttpRequest!==a&&typeof File!==a&&(!c.multipart||typeof FormData!==a||typeof FileReader!==a)},g=function(){c.dragDropSupport&&(typeof c.onDocumentDragEnter===r&&(f["dragenter."+c.namespace]=function(e){c.onDocumentDragEnter(e)}),typeof c.onDocumentDragLeave===r&&(f["dragleave."+c.namespace]=function(e){c.onDocumentDragLeave(e)}),f["dragover."+c.namespace]=p.onDocumentDragOver,f["drop."+c.namespace]=p.onDocumentDrop,e(document).bind(f),typeof c.onDragEnter===r&&(u["dragenter."+c.namespace]=function(e){c.onDragEnter(e)}),typeof c.onDragLeave===r&&(u["dragleave."+c.namespace]=function(e){c.onDragLeave(e)}),u["dragover."+c.namespace]=p.onDragOver,u["drop."+c.namespace]=p.onDrop,c.dropZone.bind(u)),l.bind("change."+c.namespace,p.onChange)},y=function(){e.each(f,function(t,o){e(document).unbind(t,o)}),e.each(u,function(e,t){c.dropZone.unbind(e,t)}),l.unbind("change."+c.namespace)},v=function(e,t,o,n){typeof n.onProgress===r&&(o.upload.onprogress=function(a){n.onProgress(a,e,t,o,n)}),typeof n.onLoad===r&&(o.onload=function(a){n.onLoad(a,e,t,o,n)}),typeof n.onAbort===r&&(o.onabort=function(a){n.onAbort(a,e,t,o,n)}),typeof n.onError===r&&(o.onerror=function(a){n.onError(a,e,t,o,n)})},D=function(e){return typeof e.url===r?e.url(e.uploadForm||o):e.url},C=function(e){return typeof e.method===r?e.method(e.uploadForm||o):e.method},b=function(e){return typeof e.fieldName===r?e.fieldName(e.fileInput||l):e.fieldName},w=function(t){var n;return typeof t.formData===r?t.formData(t.uploadForm||o):e.isArray(t.formData)?t.formData:t.formData?(n=[],e.each(t.formData,function(e,t){n.push({name:e,value:t})}),n):[]},R=function(t){if(m.test(t)){var o=location.host,n=location.protocol.length+2,a=t.indexOf(o,n),r=a+o.length;return!(a!==n&&a!==t.indexOf("@",n)+1||t.length!==r&&e.inArray(t.charAt(r),["/","?","#"])===-1)}return!0},U=function(e,t,o){o&&t.setRequestHeader("X-File-Name",unescape(encodeURIComponent(e.name))),t.setRequestHeader("Content-Type",e.type),t.send(e)},F=function(t,o,n){var a,r=new FormData;for(e.each(w(n),function(e,t){r.append(t.name,t.value)}),a=0;a<t.length;a+=1)r.append(b(n),t[a]);o.send(r)},Z=function(e,t){var o=new FileReader;o.onload=function(o){e.content=o.target.result,t()},o.readAsBinaryString(e)},T=function(t,o,n,a){var r="--",i="\r\n",s="";return e.each(a,function(e,o){s+=r+t+i+'Content-Disposition: form-action; name="'+unescape(encodeURIComponent(o.name))+'"'+i+i+unescape(encodeURIComponent(o.value))+i}),e.each(o,function(e,o){s+=r+t+i+'Content-Disposition: form-action; name="'+unescape(encodeURIComponent(n))+'"; filename="'+unescape(encodeURIComponent(o.name))+'"'+i+"Content-Type: "+o.type+i+i+o.content+i}),s+=r+t+r+i},L=function(e,t,o){var n,a,r="----MultiPartFormBoundary"+(new Date).getTime();for(t.setRequestHeader("Content-Type","multipart/form-action; boundary="+r),n=new s(function(){t.sendAsBinary(T(r,e,b(o),w(o)))},e.length),a=0;a<e.length;a+=1)Z(e[a],n.complete)},S=function(t,o,n,r){var s,l=D(r),d=R(l);v(t,o,n,r),n.open(C(r),l,!0),d?n.setRequestHeader("X-Requested-With","XMLHttpRequest"):r.withCredentials&&(n.withCredentials=!0),r.multipart?(s=typeof o===i?[t[o]]:t,typeof FormData!==a?F(s,n,r):typeof FileReader!==a?L(s,n,r):e.error("Browser does neither support FormData nor FileReader interface")):U(t[o],n,d)},_=function(t,o,n,a,i){var s=new XMLHttpRequest,l=e.extend({},c);l.fileInput=n,l.uploadForm=a,typeof l.initUpload===r?l.initUpload(t,o,i,s,l,function(){S(o,i,s,l)}):S(o,i,s,l)},E=function(e,t,o,n){var a;if(c.multiFileRequest)_(e,t,o,n);else for(a=0;a<t.length;a+=1)_(e,t,o,n,a)},A=function(t,o,n){var a=w(n);o.find(":input").not(":disabled").attr("disabled",!0).addClass(n.namespace+"_disabled"),e.each(a,function(t,a){e('<input type="hidden"/>').attr("name",a.name).val(a.value).addClass(n.namespace+"_form_data").appendTo(o)}),t.attr("name",b(n)).appendTo(o)},I=function(e,t,o){e.detach(),t.find("."+o.namespace+"_disabled").removeAttr("disabled").removeClass(o.namespace+"_disabled"),t.find("."+o.namespace+"_form_data").remove()},N=function(t,o,n,a){var i=o.attr("action"),s=o.attr("method"),l=o.attr("target");n.unbind("abort").bind("abort",function(e){n.readyState=0,n.unbind("load").attr("src","javascript".concat(":false;")),typeof a.onAbort===r&&a.onAbort(e,[{name:t.val(),type:null,size:null}],0,n,a)}).unbind("load").bind("load",function(i){n.readyState=4,typeof a.onLoad===r&&a.onLoad(i,[{name:t.val(),type:null,size:null}],0,n,a),e('<iframe src="javascript:false;" style="display:none"></iframe>').appendTo(o).remove()}),o.attr("action",D(a)).attr("method",C(a)).attr("target",n.attr("name")),A(t,o,a),n.readyState=2,o.get(0).submit(),I(t,o,a),o.attr("action",i).attr("method",s).attr("target",l)},O=function(t,o,n){var a=e('<iframe src="javascript:false;" style="display:none" name="iframe_'+c.namespace+"_"+(new Date).getTime()+'"></iframe>'),i=e.extend({},c);i.fileInput=o,i.uploadForm=n,a.readyState=0,a.abort=function(){a.trigger("abort")},a.bind("load",function(){a.unbind("load"),typeof i.initUpload===r?i.initUpload(t,[{name:o.val(),type:null,size:null}],0,a,i,function(){N(o,n,a,i)}):N(o,n,a,i)}).appendTo(n)},x=function(){o=(t.is("form")?t:t.find("form")).filter(c.uploadFormFilter)},j=function(){l=o.find("input:file").filter(c.fileInputFilter)},H=function(t){var o=t.clone(!0);e("<form/>").append(o).get(0).reset(),t.after(o).detach(),j()};this.onDocumentDragOver=function(e){return(typeof c.onDocumentDragOver!==r||c.onDocumentDragOver(e)!==!1)&&void e.preventDefault()},this.onDocumentDrop=function(e){return(typeof c.onDocumentDrop!==r||c.onDocumentDrop(e)!==!1)&&void e.preventDefault()},this.onDragOver=function(e){if(typeof c.onDragOver===r&&c.onDragOver(e)===!1)return!1;var t=e.originalEvent.dataTransfer;t&&(t.dropEffect=t.effectAllowed="copy"),e.preventDefault()},this.onDrop=function(e){if(typeof c.onDrop===r&&c.onDrop(e)===!1)return!1;var t=e.originalEvent.dataTransfer;t&&t.files&&h()&&E(e,t.files),e.preventDefault()},this.onChange=function(t){if(typeof c.onChange===r&&c.onChange(t)===!1)return!1;var o=e(t.target),a=e(t.target.form);1===a.length?(o.data(n+"_form",a),H(o)):a=o.data(n+"_form"),!c.forceIframeUpload&&t.target.files&&h()?E(t,t.target.files,o,a):O(t,o,a)},this.init=function(o){return o&&(e.extend(c,o),d=o),x(),j(),t.data(c.namespace)?void e.error('FileUpload with namespace "'+c.namespace+'" already assigned to this element'):(t.data(c.namespace,p).addClass(c.cssClass),c.dropZone.not(t).addClass(c.cssClass),void g())},this.options=function(o){var n,r,i,s;return typeof o===a?e.extend({},c):(d&&e.extend(d,o),y(),e.each(o,function(t,o){switch(t){case"namespace":return void e.error("The FileUpload namespace cannot be updated.");case"uploadFormFilter":i=!0,s=!0;break;case"fileInputFilter":s=!0;break;case"cssClass":n=c.cssClass;break;case"dropZone":r=c.dropZone}c[t]=o}),i&&x(),s&&j(),typeof n!==a?(t.removeClass(n).addClass(c.cssClass),(r?r:c.dropZone).not(t).removeClass(n),c.dropZone.not(t).addClass(c.cssClass)):r&&(r.not(t).removeClass(c.cssClass),c.dropZone.not(t).addClass(c.cssClass)),void g())},this.option=function(e,t){var o;return typeof t===a?c[e]:(o={},o[e]=t,void p.options(o))},this.destroy=function(){y(),t.removeData(c.namespace).removeClass(c.cssClass),c.dropZone.not(t).removeClass(c.cssClass)}},o={init:function(o){return this.each(function(){new t(e(this)).init(o)})},option:function(t,o,a){a=a?a:n;var r=e(this).data(a);return r?"string"==typeof t?r.option(t,o):r.options(t):void e.error('No FileUpload with namespace "'+a+'" assigned to this element')},destroy:function(t){return t=t?t:n,this.each(function(){var o=e(this).data(t);o?o.destroy():e.error('No FileUpload with namespace "'+t+'" assigned to this element')})}},e.fn.fileUpload=function(t){return o[t]?o[t].apply(this,Array.prototype.slice.call(arguments,1)):"object"!=typeof t&&t?void e.error("Method "+t+" does not exist on jQuery.fileUpload"):o.init.apply(this,arguments)}}(jQuery),function(e){var t,o,n="undefined",a="function",r=function(e,t){var o,r;return t.test(e.type)?(o=document.createElement("img"),typeof URL!==n&&typeof URL.createObjectURL===a?(o.src=URL.createObjectURL(e),o.onload=function(){URL.revokeObjectURL(this.src)},o):typeof FileReader!==n&&(r=new FileReader,typeof r.readAsDataURL===a)?(r.onload=function(e){o.src=e.target.result},r.readAsDataURL(e),o):null):null};t=function(t,o){var i,s,l=this;this.dropZone=t,this.imageTypes=/^image\/(gif|jpeg|png)$/,this.previewSelector=".file_upload_preview",this.progressSelector=".file_upload_progress div",this.cancelSelector=".file_upload_cancel button",this.cssClassSmall="",this.cssClassLarge="file_upload_large",this.cssClassHighlight="file_upload_highlight",this.dropEffect="highlight",this.uploadTable=this.downloadTable=null,this.buildUploadRow=this.buildDownloadRow=function(){return null},this.addNode=function(t,o,n){o?o.css("display","none").appendTo(t).fadeIn(function(){if(typeof n===a)try{n()}catch(t){throw e(this).stop(),t}}):typeof n===a&&n()},this.removeNode=function(t,o){t?t.fadeOut(function(){if(e(this).remove(),typeof o===a)try{o()}catch(t){throw e(this).stop(),t}}):typeof o===a&&o()},this.onAbort=function(e,t,o,n,a){a.removeNode(a.uploadRow)},this.cancelUpload=function(e,t,o,n,a){var r=n.readyState;n.abort(),(isNaN(r)||r<2)&&a.onAbort(e,t,o,n,a)},this.initProgressBar=function(t,o){if(typeof t.progressbar===a)return t.progressbar({value:o});var n=e('<progress value="'+o+'" max="100"/>').appendTo(t);return n.progressbar=function(e,t){n.attr("value",t)},n},this.initUploadRow=function(t,o,n,i,s,l){var d=s.uploadRow=s.buildUploadRow(o,n,s);d&&(s.progressbar=s.initProgressBar(d.find(s.progressSelector),i.upload?0:100),d.find(s.cancelSelector).click(function(e){s.cancelUpload(e,o,n,i,s)}),d.find(s.previewSelector).each(function(){e(this).append(new r(o[n],s.imageTypes))})),s.addNode(typeof s.uploadTable===a?s.uploadTable(s):s.uploadTable,d,l)},this.initUpload=function(e,t,o,n,r,i){r.initUploadRow(e,t,o,n,r,function(){typeof r.beforeSend===a?r.beforeSend(e,t,o,n,r,i):i()})},this.onProgress=function(e,t,o,n,a){a.progressbar&&a.progressbar.progressbar("value",parseInt(e.loaded/e.total*100,10))},this.parseResponse=function(t){return typeof t.responseText!==n?e.parseJSON(t.responseText):e.parseJSON(t.contents().text())},this.initDownloadRow=function(e,t,o,n,r,i){var s,l;try{s=r.response=r.parseResponse(n),l=r.downloadRow=r.buildDownloadRow(s,r),r.addNode(typeof r.downloadTable===a?r.downloadTable(r):r.downloadTable,l,i)}catch(d){if(typeof r.onError!==a)throw d;r.originalEvent=e,r.onError(d,t,o,n,r)}},this.onLoad=function(e,t,o,n,r){r.removeNode(r.uploadRow,function(){r.initDownloadRow(e,t,o,n,r,function(){typeof r.onComplete===a&&r.onComplete(e,t,o,n,r)})})},this.dropZoneEnlarge=function(){s||(typeof l.dropZone.switchClass===a?l.dropZone.switchClass(l.cssClassSmall,l.cssClassLarge):(l.dropZone.addClass(l.cssClassLarge),l.dropZone.removeClass(l.cssClassSmall)),s=!0)},this.dropZoneReduce=function(){typeof l.dropZone.switchClass===a?l.dropZone.switchClass(l.cssClassLarge,l.cssClassSmall):(l.dropZone.addClass(l.cssClassSmall),l.dropZone.removeClass(l.cssClassLarge)),s=!1},this.onDocumentDragEnter=function(e){l.dropZoneEnlarge()},this.onDocumentDragOver=function(e){i&&clearTimeout(i),i=setTimeout(function(){l.dropZoneReduce()},200)},this.onDragEnter=this.onDragLeave=function(e){l.dropZone.toggleClass(l.cssClassHighlight)},this.onDrop=function(e){i&&clearTimeout(i),l.dropEffect&&typeof l.dropZone.effect===a?l.dropZone.effect(l.dropEffect,function(){l.dropZone.removeClass(l.cssClassHighlight),l.dropZoneReduce()}):(l.dropZone.removeClass(l.cssClassHighlight),l.dropZoneReduce())},e.extend(this,o)},o={init:function(o){return this.each(function(){e(this).fileUpload(new t(e(this),o))})},option:function(t,o,a){return typeof t===n||"string"==typeof t&&typeof o===n?e(this).fileUpload("option",t,o,a):this.each(function(){e(this).fileUpload("option",t,o,a)})},destroy:function(t){return this.each(function(){e(this).fileUpload("destroy",t)})}},e.fn.fileUploadUIReady=function(t){return o[t]?o[t].apply(this,Array.prototype.slice.call(arguments,1)):"object"!=typeof t&&t?void e.error("Method "+t+" does not exist on jQuery.fileUploadUI"):o.init.apply(this,arguments)}}(jQuery);